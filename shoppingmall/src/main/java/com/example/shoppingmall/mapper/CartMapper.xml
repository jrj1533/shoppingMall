<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.shoppingmall.mapper.CartMapper">
<insert id="insertcart" parameterType="com.example.shoppingmall.dto.Cart">
INSERT INTO cart ( username, item_no, option_no, count) VALUES(#{username}, #{itemNo}, #{optionNo}, #{count});

</insert>

<select id="existsByItemNo"  parameterType="com.example.shoppingmall.dto.Cart" >
	SELECT EXISTS(
		SELECT 1 FROM cart WHERE item_no = #{itemNo} and option_no = #{optionNo} and username = #{username}
	)
</select>

<update id="updatecartCount" parameterType="com.example.shoppingmall.dto.Cart">
	UPDATE 
		cart SET `count` = `count` + #{count} 
	WHERE item_no = #{itemNo} and option_no = #{optionNo} and username = #{username}

</update>

</mapper>